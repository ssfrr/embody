#!/usr/bin/env python

'''embody

Tools for embedded C development. Currently just generates fake implementations
from C header files.

Usage:
    embody fake <header> [<fake_src> <fake_header>]
'''

from docopt import docopt
import embody


def main(args):
    in_filename = args['<header>']
    fake_src_filename = args['<fake_src>']
    fake_header_filename = args['<fake_header>']
    if fake_src_filename is None:
        basename = in_filename.split('.')[0]
        fake_src_filename = 'Fake' + basename + '.c'
        fake_header_filename = 'Fake' + basename + '.h'
    embody.generate_fake(in_filename, fake_src_filename,
                         fake_header_filename)

if __name__ == '__main__':
    args = docopt(__doc__)
    main(args)
